<!DOCTYPE html>
<html>

<head>
    <title>ESP8266 Web Server</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="data:,">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <!--
    <span class="menuBox">Withdraw</span>
    -->
    <span class="menuBox left1" id="tab1"></span>
    <span class="menuBox left2" id="tab2"></span>
    <span class="menuBox left3" id="tab3"></span>
    <span class="menuBox left4" id="tab4"></span>

    <div id="Nibba_colum_mid_top">
        <h1 id="caption"></h1>
        <h2 id=amount></h2>
        <p id="paragraph1"></p>
        <p id="paragraph2"></p>
        <p id="paragraph3"></p>
        <p id="paragraph4"></p>
    </div>


    <span class="menuBox right1">OKE |A</span>
    <span class="menuBox right2">TERUG |B</span>
    <span class="menuBox right3">ANNULEER |C</span>
    <span class="menuBox right4">AFSLUITEN |D</span>
          
        
</body>
<script>

    /**/
    var withdrawStep = 0;
    var amountSelected = 0;
    document.getElementById("tab1").innerHTML = "1| $10"
    document.getElementById("tab2").innerHTML = "4| $30"
    document.getElementById("tab3").innerHTML = "7| $70" 
    document.getElementById("tab4").innerHTML = "*| Gepast"
    setInterval(function () {
        var xhttp = new XMLHttpRequest();
        
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                switch(this.responseText){
                    case '1':
                        document.getElementById("caption").innerHTML = "U heeft de volgende hoeveelheid geselecteerd:";
                        document.getElementById("amount").innerHTML = "$10";
                        document.getElementById("paragraph1").innerHTML = "Is de hoeveelheid correct?";
                        withdrawStep = 1;
                        amountSelected = 10;
                        break;
                    case '4':
                        document.getElementById("caption").innerHTML = "U heeft de volgende hoeveelheid geselecteerd:";
                        document.getElementById("amount").innerHTML = "$30";
                        document.getElementById("paragraph1").innerHTML = "Is de hoeveelheid correct?";
                        withdrawStep = 1;
                        amountSelected = 30;
                        break;
                    case '7':
                        document.getElementById("caption").innerHTML = "U heeft de volgende hoeveelheid geselecteerd:";
                        document.getElementById("amount").innerHTML = "$70";
                        document.getElementById("paragraph1").innerHTML = "Is de hoeveelheid correct?";
                        withdrawStep = 1;
                        amountSelected = 70;
                        break;
                    case '11':
                        if(withdrawStep == 1){
                            document.getElementById("caption").innerHTML = "U heeft: $"+amountSelected+" geselecteerd.";
                            document.getElementById("amount").innerHTML = "Hoe wilt u het hebben?";
                            switch (amountSelected){
                                case 10:
                                    document.getElementById("paragraph1").innerHTML = "1| 1x $10";
                                    document.getElementById("paragraph2").innerHTML = "4| 2x $5";
                                    document.getElementById("paragraph3").innerHTML = "";
                                    document.getElementById("paragraph4").innerHTML = "";
                                    document.getElementById("tab1").innerHTML = "1| "
                                    document.getElementById("tab2").innerHTML = "4| "
                                    document.getElementById("tab3").innerHTML = "|" 
                                    document.getElementById("tab4").innerHTML = "|"
                                    break;
                                case 50:
                                    document.getElementById("paragraph1").innerHTML = "1| 1x $50";
                                    document.getElementById("paragraph2").innerHTML = "4| 2x $20, 1x $10";
                                    document.getElementById("paragraph3").innerHTML = "7| 5x $10";
                                    document.getElementById("paragraph4").innerHTML = "*| 10x $5";
                                    document.getElementById("tab1").innerHTML = "1| "
                                    document.getElementById("tab2").innerHTML = "4| "
                                    document.getElementById("tab3").innerHTML = "7|" 
                                    document.getElementById("tab4").innerHTML = "*|"
                                    break;
                                case 70:
                                    document.getElementById("paragraph1").innerHTML = "1| 1x $10";
                                    document.getElementById("paragraph2").innerHTML = "4| 2x $5";
                                    document.getElementById("paragraph3").innerHTML = "7| ";
                                    document.getElementById("paragraph4").innerHTML = "*| ";
                                    document.getElementById("tab1").innerHTML = "1| "
                                    document.getElementById("tab2").innerHTML = "4| "
                                    document.getElementById("tab3").innerHTML = "|" 
                                    document.getElementById("tab4").innerHTML = "|"
                                    break;

                            }
                            
                        }
                        break;
                    case '12':
                        withdrawStep = 0;
                        location.replace("/mainMenu");
                        break;
                    case '13':
                        document.getElementById("caption").innerHTML = "";
                        document.getElementById("amount").innerHTML = "";
                        document.getElementById("paragraph1").innerHTML = "";
                        document.getElementById("paragraph2").innerHTML = "";
                        document.getElementById("tab1").innerHTML = "1| $10"
                        document.getElementById("tab2").innerHTML = "4| $30"
                        document.getElementById("tab3").innerHTML = "7| $70" 
                        document.getElementById("tab4").innerHTML = "*| Gepast"
                        break;        
                }
            }
            yield();
        };
        xhttp.open("GET", "/withdrawlNav", true);
        xhttp.send();
    }, 200);

    setInterval(function () {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                if(this.responseText == true){
                    location.replace("/index");
                }
            }
        };
        xhttp.open("GET", "/abort", true);
        xhttp.send();
    }, 200);
/*
    setInterval(function () {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                if(this.responseText == 1){
                    location.replace("/mainMenu");
                    
                }
            }
        };
        xhttp.open("GET", "/withdrawAmount", true);
        xhttp.send();
    }, 200);

    setInterval(function () {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                if(this.responseText == 1){
                    location.replace("/mainMenu");
                }
            }
        };
        xhttp.open("GET", "/withdrawCheck", true);
        xhttp.send();
    }, 1000);
    
    
    setInterval(function () {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("accountNumber").innerHTML = this.responseText;
            }
        };
        xhttp.open("GET", "/accountNumber", true);
        xhttp.send();
    }, 500);
    */  
</script>

</html>